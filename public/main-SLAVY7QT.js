import{a as Q,b as G,e as J,g as $,j as M,k as y,l as I,m as S,n as X,o as T,p as Y,q as Z,r as A,s as P,t as ee,u as te,v as ne}from"./chunk-SB22PVCQ.js";import{a as ie,b as oe,c as ae,d as re,f as se}from"./chunk-6X267EKU.js";import{a as R,b as W,c as N,d as K,e as q,f as H}from"./chunk-PSUBP2VB.js";import{d as U,f as B}from"./chunk-7IMVGUBN.js";import{Ma as r,Na as v,Ya as C,_a as b,ab as f,bb as O,cb as j,da as E,db as L,eb as o,fb as a,gb as m,ha as h,hb as w,lb as _,ma as u,mb as s,na as x,sb as d,tb as g,ub as F,vb as V,wb as D,yb as z}from"./chunk-ONBYTTLV.js";var ce=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"home",loadComponent:()=>import("./chunk-5YRGBHD5.js").then(e=>e.HomeComponent)},{path:"login",loadComponent:()=>import("./chunk-MXEBKU6V.js").then(e=>e.LoginComponent)},{path:"quien-soy",loadComponent:()=>import("./chunk-VTV5MDPB.js").then(e=>e.QuienSoyComponent)},{path:"register",loadComponent:()=>import("./chunk-YLE5M7KQ.js").then(e=>e.RegisterComponent)},{path:"ahorcado",loadComponent:()=>import("./chunk-OKF4GMXQ.js").then(e=>e.AhorcadoComponent)},{path:"**",loadComponent:()=>import("./chunk-JN2OIHZJ.js").then(e=>e.PageNotFoundComponent)}];var l={production:!1,projectId:"tp-sala-de-juegos-2541e",appId:"1:284356451192:web:805eeb9ff321a4e53e868d",databaseURL:"https://tp-sala-de-juegos-2541e-default-rtdb.firebaseio.com",storageBucket:"tp-sala-de-juegos-2541e.appspot.com",apiKey:"AIzaSyBeErb_Kvi8Fjmkv4pJHazLtfJGsdAdUoI",authDomain:"tp-sala-de-juegos-2541e.firebaseapp.com",messagingSenderId:"284356451192"};var le={providers:[H(ce),h(M(()=>y({projectId:l.projectId,appId:l.appId,databaseURL:l.databaseURL,storageBucket:l.storageBucket,apiKey:l.apiKey,authDomain:l.authDomain,messagingSenderId:l.messagingSenderId}))),h(I(()=>S())),h(T(()=>P())),h(M(()=>y({projectId:l.projectId,appId:l.appId,databaseURL:l.databaseURL,storageBucket:l.storageBucket,apiKey:l.apiKey,authDomain:l.authDomain,messagingSenderId:l.messagingSenderId}))),h(I(()=>S())),h(T(()=>P()))]};function me(e,c){if(e&1){let n=w();o(0,"li",11)(1,"a",12),m(2,"fa-icon",13),a(),o(3,"div",14)(4,"div",15),m(5,"img",16),a(),o(6,"span",17),d(7),a(),m(8,"div",18),o(9,"a",19),_("click",function(){u(n);let i=s();return x(i.logout())}),o(10,"b"),d(11,"Cerrar sesion"),a()()()()}if(e&2){let n=s();r(2),b("icon",n.faUser),r(5),g(n.user)}}function pe(e,c){e&1&&(o(0,"li",8)(1,"a",20),d(2,"Iniciar sesion"),a()())}function ge(e,c){if(e&1){let n=w();o(0,"div",23),_("click",function(){u(n);let i=s(2);return x(i.toggleChatWindow())}),m(1,"fa-icon",24),a()}if(e&2){let n=s(2);r(),b("icon",n.faComment)}}function he(e,c){if(e&1&&(o(0,"div",35)(1,"div",36)(2,"b"),d(3),a()(),o(4,"div",37),d(5),a(),o(6,"div",38),d(7),a()()),e&2){let n=s().$implicit,t=s(3);r(3),g(t.formatUser(n.user)),r(2),g(n.message),r(2),g(t.formatTimestamp(n.date))}}function ue(e,c){if(e&1&&(o(0,"div",39)(1,"div",36)(2,"b"),d(3),a()(),o(4,"div",37),d(5),a(),o(6,"div",38),d(7),a()()),e&2){let n=s().$implicit,t=s(3);r(3),g(t.formatUser(n.user)),r(2),g(n.message),r(2),g(t.formatTimestamp(n.date))}}function xe(e,c){if(e&1&&C(0,he,8,3,"div",35)(1,ue,8,3),e&2){let n=c.$implicit,t=s(3);f(0,n.user===t.user?0:1)}}function fe(e,c){if(e&1){let n=w();o(0,"div",22)(1,"div",25),m(2,"img",26),o(3,"p",27),d(4,"#General"),a(),m(5,"img",28),o(6,"fa-icon",29),_("click",function(){u(n);let i=s(2);return x(i.toggleChatWindow())}),a()(),o(7,"div",30)(8,"div",31),j(9,xe,2,1,null,null,O),a()(),o(11,"div",32)(12,"input",33),D("ngModelChange",function(i){u(n);let p=s(2);return V(p.messageText,i)||(p.messageText=i),x(i)}),_("keyup.enter",function(){u(n);let i=s(2);return x(i.sendMessage())}),a(),o(13,"button",34),_("click",function(){u(n);let i=s(2);return x(i.sendMessage())}),d(14,"Enviar"),a()()()}if(e&2){let n=s(2);r(6),b("icon",n.faTimes),r(3),L(n.messages),r(3),F("ngModel",n.messageText)}}function _e(e,c){if(e&1&&C(0,ge,2,1,"div",21)(1,fe,15,2,"div",22),e&2){let n=s();f(0,n.showChatWindow?-1:0),r(),f(1,n.showChatWindow?1:-1)}}var de=(()=>{let c=class c{constructor(t,i,p){this.authService=t,this.router=i,this.firestore=p,this.title="tp_sala_de_juegos",this.user="",this.isLoggedIn=!1,this.showChatWindow=!1,this.faUser=re,this.faComment=ae,this.faTimes=se,this.messages=[],this.messageText="",this.sub=null,this.router.events.subscribe(k=>{k instanceof R&&this.checkAuthState()})}checkAuthState(){this.authService.isAuthenticated().then(t=>{this.isLoggedIn=t,this.user=this.authService.getUser(),this.getMessages()}).catch(t=>console.log(t))}logout(){this.authService.logout().then(()=>{this.isLoggedIn=!1,this.router.navigate(["/login"])}).catch(t=>console.log(t))}toggleChatWindow(){setTimeout(()=>{this.scrollToBottom()},0),this.showChatWindow=!this.showChatWindow}sendMessage(){if(this.messageText!==""){let t=A(this.firestore,"messages");Z(t,{date:new Date,user:this.user,message:this.messageText}),this.messageText=""}}getMessages(){let t=A(this.firestore,"messages"),i=te(t,ee("date","asc"));this.messages=[];let p=Y(i);this.sub=p.subscribe(k=>{this.messages=k,setTimeout(()=>{this.scrollToBottom()},0)})}formatUser(t){return t.split("@")[0]}formatTimestamp(t){let i=t.toDate();return U(i,"d MMM. y h:mm a","en-US")}scrollToBottom(){let t=document.getElementById("chatMessages");t&&(t.scrollTop=t.scrollHeight)}};c.\u0275fac=function(i){return new(i||c)(v(ne),v(N),v(X))},c.\u0275cmp=E({type:c,selectors:[["app-root"]],standalone:!0,features:[z],decls:18,vars:2,consts:[[1,"custom-nav","navbar","navbar-expand-lg","navbar-light","shadow"],["href","#",1,"navbar-brand","d-flex","align-items-center"],["src","../assets/iconic.png","width","185","max-height","200","alt","Icono",1,"d-inline-block","align-top","ml-2","mt-1"],["src","../assets/fantasmas.png","width","75","max-height","70","alt","Icono",1,"d-inline-block","align-top","ml-2","mt-1"],["type","button","data-toggle","collapse","data-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse","justify-content-end"],[1,"navbar-nav","nav-opt"],[1,"nav-item","mx-3"],["routerLink","home","routerLinkActive","ruta-activa",1,"nav-link"],["routerLink","quien-soy","routerLinkActive","ruta-activa",1,"nav-link"],[1,"nav-item","dropdown","mx-3"],["id","navbarDropdown","role","button","data-bs-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"nav-link","dropdown-toggle"],[3,"icon"],["aria-labelledby","navbarDropdown",1,"dropdown-menu","dropdown-menu-end"],[1,"col","text-center"],["src","../assets/perfil.png","width","100","alt","Perfil"],[1,"dropdown-item-text"],[1,"dropdown-divider"],[1,"dropdown-item",3,"click"],["routerLink","login","routerLinkActive","ruta-activa",1,"nav-link"],[1,"chat-bubble","shadow"],[1,"chat-window","d-flex","flex-column","justify-content-between"],[1,"chat-bubble","shadow",3,"click"],[1,"chat-icon",3,"icon"],[1,"chat-header"],["src","../assets/icono.png","width","37","height","37","alt","Icono",1,"d-inline-block","align-top","mx-1","mt-1"],[1,"h-chat","mt-4"],["src","../assets/fantasmas.png","width","65","height","65","alt","Icono",1,"d-inline-block","align-top","ms-1","ml-2","mt-2"],[1,"close-chat-icon",3,"click","icon"],[1,"chat-body"],["id","chatMessages",1,"chat-messages"],[1,"chat-footer","d-flex","justify-content-around"],["type","text","placeholder","Escribe un mensaje...",1,"form-control",3,"ngModelChange","keyup.enter","ngModel"],[1,"btn","btn-primary","btn-enviar",3,"click"],[1,"chat-message","chat-message-me"],[1,"chat-message-user"],[1,"chat-message-text"],[1,"chat-message-time"],[1,"chat-message","chat-message-other"]],template:function(i,p){i&1&&(o(0,"nav",0)(1,"a",1),m(2,"img",2)(3,"img",3),a(),o(4,"button",4),m(5,"span",5),a(),o(6,"div",6)(7,"ul",7)(8,"li",8)(9,"a",9),d(10,"Inicio"),a()(),o(11,"li",8)(12,"a",10),d(13,"Quien soy"),a()(),C(14,me,12,2,"li",11)(15,pe,3,0),a()()(),C(16,_e,2,2),m(17,"router-outlet")),i&2&&(r(14),f(14,p.isLoggedIn?14:15),r(2),f(16,p.isLoggedIn?16:-1))},dependencies:[W,K,q,oe,ie,$,Q,G,J],styles:[".ruta-activa[_ngcontent-%COMP%]{font-weight:500;color:#000}.custom-nav[_ngcontent-%COMP%]{height:70px;background-color:#e4e4e4;transition:all;padding:0 10px;z-index:2;position:fixed;width:100%}.nav-opt[_ngcontent-%COMP%]{background-color:#e4e4e4;cursor:pointer;z-index:2;font-size:17px}.chat-bubble[_ngcontent-%COMP%]{position:fixed;bottom:30px;right:35px;width:75px;height:75px;background-color:#2b95ff;border-radius:50%;display:flex;justify-content:center!important;align-items:center!important;cursor:pointer;z-index:9999}.chat-bubble[_ngcontent-%COMP%]:hover{background-color:#2080e1;transition:all .3s}.h-chat[_ngcontent-%COMP%]{font-size:24px}.chat-icon[_ngcontent-%COMP%]{width:50px;height:50px;font-size:40px;margin-bottom:11px;color:#fff}.close-chat-icon[_ngcontent-%COMP%]{height:50px;font-size:30px;color:#232323;cursor:pointer;margin-left:auto;margin-right:20px}.chat-window[_ngcontent-%COMP%]{position:fixed;bottom:40px;right:70px;width:500px;height:500px;background-color:#f0f0f0;border-radius:10px;box-shadow:0 0 10px #0000001a;z-index:9998}.chat-header[_ngcontent-%COMP%]{width:100%;height:85px;background-color:#2b95ff;border-top-left-radius:10px;border-top-right-radius:10px;display:flex;justify-content:center;align-items:center}.chat-footer[_ngcontent-%COMP%]{width:100%;height:75px;background-color:#e4e4e4;border-bottom-left-radius:10px;border-bottom-right-radius:10px;display:flex;justify-content:space-between;align-items:center;bottom:auto}.chat-footer[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:75%;height:50px;border:none;border-radius:10px;margin-left:10px;padding-left:10px;font-size:16px}.btn-enviar[_ngcontent-%COMP%]{width:15%;height:38px;border:none;border-radius:10px;margin-right:10px;font-size:16px;cursor:pointer;background-color:#2b95ff}.chat-messages[_ngcontent-%COMP%]{max-height:350px;overflow-y:scroll;padding:10px}.chat-message[_ngcontent-%COMP%]{margin:25px 0;width:65%;border-radius:4px}.chat-message-me[_ngcontent-%COMP%]{background-color:#c7c7c7;margin-left:auto}.chat-message-other[_ngcontent-%COMP%]{background-color:#e4e4e4;margin-right:auto}.chat-message-user[_ngcontent-%COMP%], .chat-message-text[_ngcontent-%COMP%]{padding:3px;margin-left:6px}.chat-message-time[_ngcontent-%COMP%]{padding:3px;margin-left:53%;font-size:13px;color:#4d4d4d}@media screen and (max-width: 768px){.chat-window[_ngcontent-%COMP%]{width:100%;height:70%;bottom:0;right:0}.chat-messages[_ngcontent-%COMP%]{height:100%}.chat-message-time[_ngcontent-%COMP%]{margin-left:45%}}"]});let e=c;return e})();B(de,le).catch(e=>console.error(e));
